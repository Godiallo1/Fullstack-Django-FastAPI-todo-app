{% extends 'todo/base.html' %}

{% block title %}TodoApp - Master Your Day{% endblock %}

{% block content %}
<!-- LANDING PAGE (Visible when logged out) -->
<div id="landing-page">
  <section class="landing-hero">
    <div class="container">
      <div class="hero-content">
        <h1>Master Your Day, <br /><span class="text-gradient">One Task at a Time.</span></h1>
        <p>
          The ultimate task management tool for professionals. Prioritize,
          track, and organize your life with our intelligent queue system.
        </p>
        <div class="hero-actions">
          <button id="get-started-btn" class="btn btn-primary btn-lg">Get Started for Free</button>
          <a href="#features" class="btn btn-secondary btn-lg">Learn More</a>
        </div>
      </div>
    </div>
  </section>

  <section id="features" class="features-section">
    <div class="container">
      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon">ðŸš€</div>
          <h3>Smart Queue</h3>
          <p>Focus on what matters. Our intelligent queue system helps you prioritize tasks effectively.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">âš¡</div>
          <h3>Lightning Fast</h3>
          <p>Built for speed. Add, edit, and complete tasks in milliseconds without page reloads.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">ðŸ”’</div>
          <h3>Secure by Design</h3>
          <p>Your data is encrypted and secure. We prioritize your privacy and data security.</p>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- MAIN APP (Visible when logged in) -->
<div id="app-container" class="container hidden">
  <header class="dashboard-header">
    <div>
      <h1 style="margin: 0; font-size: 2rem;">My Tasks</h1>
      <p style="color: var(--text-secondary); margin-top: 5px;" id="current-date"></p>
    </div>
    <div class="user-menu">
      <!-- User info could go here -->
    </div>
  </header>

  <div class="content-wrapper">
    <!-- Sidebar / Form -->
    <aside class="form-container">
      <h2 style="margin-top: 0; margin-bottom: 1.5rem;">Add New Task</h2>
      <form id="task-form">
        <div class="form-group">
          <label for="title">Task Title</label>
          <input type="text" id="title" name="title" placeholder="e.g., Review Q3 Report" required />
        </div>

        <div class="form-group">
          <label for="description">Description (Optional)</label>
          <textarea id="description" name="description" rows="3" placeholder="Add details..."></textarea>
        </div>

        <div class="row-group">
          <div class="form-group half">
            <label for="priority">Priority</label>
            <select id="priority" name="priority">
              <option value="Low">Low</option>
              <option value="Medium">Medium</option>
              <option value="High">High</option>
            </select>
          </div>
          <div class="form-group half">
            <label for="due_date">Due Date</label>
            <input type="date" id="due_date" name="due_date" required />
          </div>
        </div>

        <button type="submit" class="btn btn-primary btn-full">Add to Queue</button>
      </form>
    </aside>

    <!-- Task List Area -->
    <section class="tasks-container">
      <div class="tabs">
        <button class="tab-btn active" data-tab="Queue">Queue</button>
        <button class="tab-btn" data-tab="In Progress">In Progress</button>
        <button class="tab-btn" data-tab="Completed">Completed</button>
        <button class="tab-btn" data-tab="Aborted">Bin</button>
      </div>

      <div class="tasks-controls" style="margin-bottom: 1.5rem; justify-content: space-between;">
        <span id="task-count" style="font-weight: 600; color: var(--text-secondary);">0 Tasks</span>

        <div style="display: flex; align-items: center; gap: 10px;">
          <label for="priority-filter" style="font-size: 0.9rem; color: var(--text-secondary);">Filter:</label>
          <select id="priority-filter" class="filter-select">
            <option value="All">All Priorities</option>
            <option value="High">High</option>
            <option value="Medium">Medium</option>
            <option value="Low">Low</option>
          </select>
        </div>
      </div>

      <ul id="task-list">
        <!-- Tasks injected here -->
      </ul>
    </section>
  </div>
</div>

<!-- Edit Modal (Specific to Dashboard) -->
<div id="edit-modal-overlay" class="modal-overlay hidden"></div>
<div id="edit-modal" class="modal hidden">
  <div class="modal-header">
    <h2>Edit Task</h2>
    <button id="close-modal-btn" class="btn-icon">âœ•</button>
  </div>
  <div class="modal-content">
    <form id="edit-task-form">
      <input type="hidden" id="edit-task-id" name="id">
      <div class="form-group">
        <label for="edit-title">Task Title</label>
        <input type="text" id="edit-title" name="title" required />
      </div>
      <div class="form-group">
        <label for="edit-description">Description</label>
        <textarea id="edit-description" name="description" rows="3"></textarea>
      </div>
      <div class="row-group">
        <div class="form-group half">
          <label for="edit-priority">Priority</label>
          <select id="edit-priority" name="priority">
            <option value="Low">Low</option>
            <option value="Medium">Medium</option>
            <option value="High">High</option>
          </select>
        </div>
        <div class="form-group half">
          <label for="edit-due_date">Due Date</label>
          <input type="date" id="edit-due_date" name="due_date" required />
        </div>
      </div>
      <button type="submit" class="btn btn-primary btn-full">Save Changes</button>
    </form>
  </div>
</div>

<!-- Template for Task Items -->
<template id="task-template">
  <li class="task-item">
    <div class="task-details">
      <div class="task-title-line">
        <h3 class="task-title"></h3>
        <span class="task-priority"></span>
        <span class="task-status-badge"></span>
      </div>
      <p class="task-description"></p>
      <div class="task-meta-info">
        <span class="task-due-date"></span>
      </div>
    </div>
    <div class="task-actions">
      <!-- Actions injected via JS -->
    </div>
  </li>
</template>
{% endblock %}